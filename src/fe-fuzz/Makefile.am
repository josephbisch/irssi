SUBDIRS = irc fe-common

bin_PROGRAMS = irssi-fuzz server-fuzz

# Force link with CXX for libfuzzer support
CCLD=$(CXX) $(CXXFLAGS)

AM_CPPFLAGS = \
	-I$(top_srcdir)/src \
	-I$(top_srcdir)/src/core/ \
	-I$(top_srcdir)/src/irc/core/ \
	-I$(top_srcdir)/src/fe-common/core/ \
	$(GLIB_CFLAGS)

irssi_fuzz_DEPENDENCIES = @COMMON_LIBS@

irssi_fuzz_LDADD = \
	@COMMON_LIBS@ \
	@PROG_LIBS@ \
	$(FUZZER_LIBS) \
	module-formats.o

irssi_fuzz_SOURCES = \
        irssi.c

server_fuzz_DEPENDENCIES = @COMMON_LIBS@

server_fuzz_LDADD = \
	@COMMON_LIBS@ \
	@PROG_LIBS@ \
	$(FUZZER_LIBS) \
	module-formats.o

server_fuzz_SOURCES = \
	server.c

noinst_HEADERS = \
	$(top_srcdir)/src/fe-text/module-formats.h
